#!/usr/bin/env /work/railsapps/stock_db_capture/script/runner

require "#{RAILS_ROOT}/lib/populate_db.rb"

if ARGV.first =~ /-(x|s|r)/
  TradingDBLoader.new(ARGV.first.last).load_quotes(ARGV[1..10])
elsif ARGV.first =~ /-(w|W)/
  TradingDBLoader.new(ARGV.first.last, :source => 'config/tickers.csv',
                                       :start_date => (Date.today-2.year),
                                       :end_date => Date.today).load
elsif ARGV.first == '-z'
  ldr = TradingDBLoader.new('z', :start_date => Date.parse('2008-12-17'),
                                 :end_date => Date.yesterday,
                                 :source => 'config/tickers.csv')
  ldr.load

elsif ARGV.first == '-Z'
  ldr = TradingDBLoader.new('z', :start_date => (Date.today-1.year),
                                 :end_date => Date.today)
  ldr.load_historical_quotes(ARGV[1..10])
else
  p 'usage: loaddb -[xszrwZ]'
end

## Local Variables: **
## mode:ruby **
## comment-column:0 **
## comment-start: "#"  **
## End: **

